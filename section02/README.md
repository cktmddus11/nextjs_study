# 2.1) Page Router ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.
> ì•ˆì •ì ì¸ ë¼ìš°í„°   
> React Routerì²˜ëŸ¼ í˜ì´ì§• ë¼ìš°íŒ… ê¸°ëŠ¥ì„ ì œê³µí•¨.

- pages í´ë”ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¼ìš°íŒ…ë¨.
- ë™ì ê²½ë¡œ ~/item/100 ê°™ì€ í˜ì´ì§€ë¥¼ ë§Œë“œë ¤ë©´ í´ë”ë¥¼ pages/item/[id].js  ë¡œ ìƒì„±


- npx create-next-app@14 section02
- npm run dev

## í”„ë¡œì íŠ¸ êµ¬ì¡° í™•ì¸
- public - ë™ì  íŒŒì¼
- src
  - pages : ê²½ë¡œì— ë§ëŠ” í˜ì´ì§€
  - styles

- _app.tsx : ëª¨ë“  í˜ì´ì§€ì˜ ë¶€ëª¨ì—­í• ì„ í•˜ëŠ” root ì»´í¬ë„ŒíŠ¸
  => layoutì´ë‚˜ ê³µí†µ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì‘ì„±í•  ìˆ˜ ìˆìŒ.
- _document.tsx : ëª¨ë“  í˜ì´ì§€ì— ê³µí†µì ìœ¼ë¡œ ì ìš©í•´ì•¼í•˜ëŠ” html ì½”ë“œ ì„¤ì •.
  => meta íƒœê·¸, font, chracter set, Third party code
- next.config.mjs : nextì•±ì˜ ì„¤ì • ê´€ë¦¬

# 2.3) í˜ì´ì§€ ë¼ìš°íŒ… ì„¤ì •í•˜ê¸°
- í˜ì´ì§€ ë¼ìš°íŒ… ìƒì„±ì‹œ
  - ë°©ë²• 1 : search.tsx
  - ë°©ë²• 2 : folder search > index.tsx
- í´ë” ì¤‘ì²© ë˜ëŠ” í•´ë‹¹ í´ë”ì— ê²½ë¡œëª… íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ì¤‘ì²©ëœ í˜ì´ì§• ë¼ìš°íŒ…ì´ ê°€ëŠ¥.


## ë™ì  í˜ì´ì§€ ìƒì„± ë° ë™ì  ê°’ ì½ê¸°
ë‘ ë°©ì‹ ë™ì¼í•˜ê²Œ useRouterì„ ì´ìš©í•´ì„œ query ê°ì²´ì—ì„œ ê°’ì„ ì½ì„ ìˆ˜ ìˆë‹¤.
```js
import { useRouter } from "next/router";
const router = useRouter();
const { q } = router.query;
```

### queryString ì½ê¸°
- import { useRouter } from "next/router";
- ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ê³  queryString ì„ ì´ìœ¼ë©´ì„œ í™”ë©´ì´ ë Œë”ë§ë˜ê¸° ë•Œë¬¸ì— ë‘ë²ˆ ë Œë”ë§ ëœë‹¤. ë”°ë¼ì„œ ë‘ë²ˆì§¸ì— router ê°ì²´ì— query ì†ì„±ì— ê°’ì„ ì½ì–´ì˜¨ë‹¤.


### URL Parameter
- ./book/100, ./book/200 ê³¼ ê°™ì€ ë™ì  í˜ì´ì§€ ìƒì„±ì‹œ
  - book í´ë” í•˜ìœ„ì— [id].tsx ë¼ëŠ” íŒŒì¼ì„ ìƒì„±í•˜ë©´ ë™ì ê²½ë¡œì™€ ëŒ€ì‘í•˜ê²Œ ë¨.
  - [] ì•ˆì— ìˆëŠ” ê°’ì´ í‚¤ê°’ì´ ë˜ì–´ ì €ì¥ë¨.
- ./book/123/4324
  - [...id].tsx ì™€ ê°™ì´ íŒŒì¼ì„ ìƒì„±í•œë‹¤.(Catch All Segment)
  - ... ëŠ” ì—¬ëŸ¬ê°œì˜ idê°€ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸
  - router query ê°ì²´ì—ëŠ” ë°°ì—´í˜•íƒœë¡œ ì €ì¥ë˜ì–´ìˆìŒ.
- ./book ì„ í–ˆì„ë•ŒëŠ” 404 not found ë¡œ ëœ¨ê²Œ ë¨ (url parameterì„ ë¬´ì¡°ê±´ ë°›ë„ë¡ í•´ë‘ì—ˆê¸° ë•Œë¬¸ì—)
  - [[...id]].jsx ì™€ ê°™ì´ ëŒ€ê´„í˜¸ë¡œ í•œë²ˆë” ê°ì‹¸ì£¼ë©´ idê°€ ìˆë“  ì—†ë“  ëŒ€ì‘ì´ ê°€ëŠ¥í•˜ë‹¤. (Optional Catch All Segement)

## Not Found í˜ì´ì§€ ë§Œë“¤ê¸°
- pages/404.tsx íŒŒì¼ ìƒì„±í•´ì„œ ê¸°ë³¸ page ì»´í¬ë„ŒíŠ¸ ë¦¬í„´í•´ì£¼ê¸°.


# 2.3) ë„¤ë¹„ê²Œì´íŒ…
```html
<a></a> # ê¸°ì¡´ì˜ a íƒœê·¸ëŠ” csr ë°©ì‹ìœ¼ë¡œ í˜ì´ì§€ë¥¼ ì´ë™ì‹œí‚¤ëŠ” ê²Œ ì•„ë‹ˆë¼
# html ì¼ë°˜ì ì¸ ë°©ì‹ìœ¼ë¡œ í˜ì´ì§€ë¥¼ ë§¤ë²ˆ ìƒˆë¡­ê²Œ ìš”ì²­í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì´ë™ì‹œí‚¤ê²Œ ë¨.
```
- next.js app => Link ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©.
- csr ë°©ì‹ìœ¼ë¡œ í˜ì´ì§€ ì´ë™í•˜ë„ë¡ êµ¬í˜„
```js
import {useRouter} from "next/router";
router.push("/test")
```

# 2.4 í”„ë¦¬íŒ¨ì¹­ Pre-fetching
ì‚¬ìš©ìê°€ ë³´ê³ ìˆëŠ” í˜ì´ì§€ë¥¼ ë¯¸ë¦¬ ë¶ˆëŸ¬ì˜¤ëŠ” ê¸°ëŠ¥.
> Q. ì™œ í•„ìš”í• ê¹Œ? ì´ë¯¸ Next js ëŠ” CSR ìœ¼ë¡œ ë³„ë„ì˜ ì„œë²„ ìš”ì²­ì—†ì´ ë¸Œë¼ìš°ì ¸ê°€ JSë¥¼ ì‹¤í–‰í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ë¥¼
> êµì²´í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ í˜ì´ì§€ë¥¼ êµì²´í•  ìˆ˜ ìˆëŠ”ë°.   
> A. ì»´í¬ë„ŒíŠ¸ë“¤ì„ ê° í˜ì´ì§€ë³„ë¡œ slit í•´ì„œ ê°€ì§€ê³  ìˆê¸°ë•Œë¬¸ì„.

- **Js Bundle : í˜„ì¬ í˜ì´ì§€ì— í•„ìš”í•œ JS Bundle ë§Œ ì „ë‹¬ëœë‹¤.**
  - ex) "/search" ì ‘ì†ìš”ì²­ -> Search JS Bundle
  - ë§Œì•½ ëª¨ë“  í˜ì´ì§€ ë²ˆë“¤íŒŒì¼ì„ ì „ë‹¬í•  ê²½ìš° ìš©ëŸ‰ì´ ë„ˆë¬´ ì»¤ì§€ê²Œ ë˜ë©° í•˜ì´ë“œë ˆì´ì…˜ì´ ëŠë ¤ì§€ê²Œë¨.   
    ì¦‰, ìš”ì²­ë¶€í„° ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì§€ê¸°ê¹Œì§€ì˜ ì‹œê°„ì¸ TTI ê°€ ëŠë ¤ì§€ê²Œë¨.   
    -> ìš©ëŸ‰ ê²½ëŸ‰í™”ë¡œ ì¸í•´ Hydration ì‹œê°„ì€ ë‹¨ì¶•ëœë‹¤.

> Q. ê·¸ëŸ¼ ë‹¤ë¥¸ í˜ì´ì§€ ì´ë™í• ë•ŒëŠ” ë˜ ì„œë²„ì—ì„œ js Bundle ê°€ í•„ìš”í•˜ê² ë„¤?   
> A. ë§ìŒ. TTIëŠ” ë¹¨ë¼ì§ˆìˆ˜ ìˆì–´ë„ í˜ì´ì§€ ì´ë™ì´ ëŠë ¤ì§ˆìˆ˜ ìˆìŒ.    
ê·¸ë ‡ê¸° ë•Œë¬¸ì— Pre-Fetching ì‚¬ì „ì— ë¯¸ë¦¬ ë¶ˆëŸ¬ì˜¤ëŠ” ê¸°ëŠ¥ì„ ì‚¬ìš©í•¨.

## í”„ë¦¬íŒ¨ì¹­ì´ë€?
ì´ˆê¸°ì ‘ì† ì´í›„ì— ì—°ê²°ëœ ëª¨ë“  í˜ì´ì§€ì˜ JS Bundleì„ ì‚¬ì „ì— ë¶ˆëŸ¬ì˜´.
-> í˜ì´ì§€ ì´ë™ì´ ë¹¨ë¼ì§
![Pre-Fetching](../img/Pre-Fetching.png)
ì¦‰ Js Bundle í›„ì— pre-fetching í›„ í˜ì´ì§€ ì´ë™ ë°œìƒ ì‹œ ì»´í¬ë„ŒíŠ¸ë§Œ êµì²´í•˜ëŠ” ìˆœìœ¼ë¡œ ë Œë”ë§í•¨.
![Pre-Fetching](../img/Pre-Fetching2.png)

í•˜ì§€ë§Œ npm run dev ìƒíƒœì—ì„œëŠ” ì´ ê¸°ëŠ¥ì´ ë™ì‘ì•ˆí•¨.
- npm run build : ì†ŒìŠ¤ ë¹Œë“œ. ë¹Œë“œ ë¡œê·¸ì—ì„œ ê° í˜ì´ì§€ë³„ js Bundle ì½”ë“œì˜ ìš©ëŸ‰ê¹Œì§€ í™•ì¸ í•  ìˆ˜ ìˆìŒ.
- npm run start : production ëª¨ë“œë¡œ ì‹¤í–‰.

### pre-fetching ì˜ˆì™¸
- Link ì»´í¬ë„ŒíŠ¸ë¡œëŠ” ì˜ë¨.
- í”„ë¡œê·¸ë˜ë°ì ìœ¼ë¡œ? í˜ì´ì§€ ì´ë™ì„ êµ¬í˜„í•´ ë†¨ì„ ê²½ìš° EX) button ìœ¼ë¡œ í´ë¦­ì‹œ í–ˆì„ ë•ŒëŠ” ì•ˆë¨

### router ê°ì²´ì˜ prefetch ì´ìš©í•˜ê¸°
```js
  useEffect(() => {
  router.prefetch("/test")
}, []);
```
### í•´ì œ
```js
<Link href={'/search'} prefetch={false}>search</Link>

```

# 2.5) API Routes
Next.js ì—ì„œ APIë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê¸°ëŠ¥

## API ì •ì˜
- pages > api > hello.ts => /api/hello ë¼ëŠ” api ê²½ë¡œë¡œ ì‘ë™ë¨.
- NextApiRequest, NextApiResponse ê°ì²´ ì‚¬ìš©   
  [API ROUTES ê³µì‹ ë¬¸ì„œ](https://nextjs.org/docs/pages/building-your-application/routing/api-routes)



# 2.6) ìŠ¤íƒ€ì¼ë§
- app ì»´í¬ë„ŒíŠ¸ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” global css ë°”ë¡œ import í•  ìˆ˜ì—†ìŒ
  => css class ì¶©ëŒë°©ì§€ë¥¼ ìœ„í•´

## CSS Module
- index.module.css ë¡œ import í›„ ê°ì²´ì— ë‹´ì•„ì„œ í˜ì´ì§€ ë³„ë¡œ ìœ ë‹ˆí¬í•˜ê²Œ ì‚¬ìš©
```js
import style from "./index.module.css";

```

# 2.7) ê¸€ë¡œë²Œ ë ˆì´ì•„ì›ƒ ì„¤ì •í•˜ê¸°
- src > components > global-layout.tsx
  - APP ì»´í¬ë„ŒíŠ¸ì— GlobalLayout ìœ¼ë¡œ ê°ì‹¸ì£¼ê¸°
  - global-layout.module.css import

```js
// global-layout.tsx
export default function GlobalLayout({children} : {
  children:ReactNode
}){
  return <>
```
```js
// _app.tsx
export default function App({Component, pageProps}: AppProps) {
  // Component : í˜ì´ì§€ ì—­í• 
  // pageProps : í˜ì´ì§€ì— ì „ë‹¬í•  Props
  return <>
    <GlobalLayout>
      <Component {...pageProps} />
```
- ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸ì—ëŠ” children ìœ¼ë¡œ APP ì»´í¬ë„ŒíŠ¸ì—ì„œ ì „ë‹¬í•˜ëŠ” PagePropsë¥¼ ë°›ì„ ìˆ˜ ìˆë„ë¡ í•¨.

# 2.8) í˜ì´ì§€ë³„ ë ˆì´ì•„ì›ƒ ì„¤ì •í•˜ê¸°
- ìš”ê±´ : ê²€ìƒ‰ë°”ëŠ” ì „ì²´ í™”ë©´ì—ì„œ ì¡´ì¬í•˜ì§€ë§Œ ë„ì„œ ìƒì„¸ í™”ë©´ì—ì„œë§Œ ì ìš©ë˜ì§€ ì•Šì•„ì•¼í•¨.
  => global ì»´í¬ë„ŒíŠ¸ ë§ê³  í•„ìš”í•œ í˜ì´ì§€ì—ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ì¶œí•˜ê¸°

- êµ¬í˜„ : ê° í˜ì´ì§€ì— getLayout í•¨ìˆ˜ ì „ë‹¬í•´ì„œ App ì»´í¬ë„ŒíŠ¸ì— í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ í• ë•Œ getLayout ì— ìˆëŠ” ì»´í¬ë„ŒíŠ¸ë¡œ ê°ì‹¸ì„œ ì „ë‹¬ë˜ë„ë¡ ì²˜ë¦¬.
```js 
// ê° í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
Home.getLayout = (page: ReactNode) => {
  return <SearchableLayout>{page}</SearchableLayout>
}
```
- Appì»´í¬ë„ŒíŠ¸ì— Component íŒŒë¼ë¯¸í„°ì— ê° í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ê°€ ë‹´ê²¨ìˆìŒ. ê·¸ë˜ì„œ ê° í˜ì´ì§€ì— ì¸ìˆ˜ë¡œ ì „ë‹¬í•œ getLayoutí•¨ìˆ˜ë¥¼ Component ê°ì²´ë¡œ
  ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŒ.
```js 
// app ì»´í¬ë„ŒíŠ¸
const getLayout = Component.getLayout;
return <>
  <GlobalLayout>
    {getLayout(<Component {...pageProps} />)}
```
- NextPage íƒ€ì… í™•ì¥
```js
type NextPageWithLayout = NextPage & {
  getLayout?: (page: ReactNode) => ReactNode;  //  getLayout? : typescript ì„ íƒì  ì†ì„± (?) getLayoutì´ ì—†ëŠ” í˜ì´ì§€ ë•Œë¬¸ì— ì˜µì…”ë„í•˜ê²Œ ì²˜ë¦¬
}
```
- AppProps íƒ€ì… í™•ì¥
```js
export default function App({Component, pageProps}: AppProps & {
  Component : NextPageWithLayout
}) {

```
# 2.9) í•œì… ë¶ìŠ¤ UI êµ¬í˜„í•˜ê¸°
- ì±… ìƒì„¸ í˜ì´ì§€ ìš”ê±´ : ì±… ìƒì„¸ëŠ” idë¥¼ í¬í•¨í•œ í˜ì´ì§€ì´ë™ë§Œì´ ê°€ëŠ¥í•´ì•¼í•œë‹¤.
  - [[...id]].tsx => [id].tsxë¡œ ë³€ê²½í•˜ê¸° : /book ì´ë™ ë¶ˆê°€í•˜ê³  /book/1/234/3 ì—¬ëŸ¬ê°œ idë¶ˆê°€ëŠ¥. /book/1 ë§Œ ê°€ëŠ¥.


# 2.10) ì‚¬ì „ ë Œë”ë§ê³¼ ë°ì´í„° íŒ¨ì¹­

### React App ì—ì„œì˜ ë°ì´í„° í˜ì¹­
- ë‹¨ì  : ì´ˆê¸° ì ‘ì† ìš”ì²­ë¶€í„° ë°ì´í„° ë¡œë”©ê¹Œì§€ ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦¼.
  - 3ë²ˆ ê³¼ì •ì—ì„œ í™”ë©´ì´ ë§ˆìš´íŠ¸ ëœ í›„ì— ìš”ì²­ì´ ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì—.
```js
export default Page = () => {
  const [state, setState] = useState(); // 1. ë¶ˆëŸ¬ì˜¨ ë°ì´í„°ë¥¼ ë³´ê´€í•  state ìƒì„±
  const fetchData = async () => { // 2. ë°ì´í„° íŒ¨ì¹­ í•¨ìˆ˜ ìƒì„±
    const response = await fetch("...");
    const data = await response.json();

    setState(data);
  }
  useEffect(() => { // 3. ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œì ì— fetchData í˜¸ì¶œ
    fetchData();
  }, []);
  if(!state) return "loading..."; // 4. ë°ì´í„° ë¡œë”©ì¤‘ì¼ë–„ì˜ ì˜ˆì™¸ì²˜ë¦¬

  return <div>...</div>;
}

```
![React js App ì‚¬ì „ë Œë”ë§](../img/Reacteë°ì´í„°íŒ¨ì¹­.png)

### Next App ì—ì„œì˜ ë°ì´í„° í˜ì¹­
![Next js App ì‚¬ì „ë Œë”ë§](../img/Nextjsë°ì´í„°íŒ¨ì¹­.png)

> React App ì˜ ë°ì´í„° íŒ¨ì¹­
>> - ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì´í›„ì— ë°œìƒí•¨.
>> - ë°ì´í„° ìš”ì²­ ì‹œì ì´ ëŠë ¤ì§€ê²Œ ë˜ëŠ” ë‹¨ì  ë°œìƒ.

> Next App ì˜ ë°ì´í„° íŒ¨ì¹­
>> - **ì‚¬ì „ë Œë”ë§**ì¤‘ ë°œìƒí•¨(ë‹¹ì—°íˆ ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì´í›„ì—ë„ ë°œìƒê°€ëŠ¥)
>> - ë°ì´í„° ìš”ì²­ ì‹œì ì´ ë§¤ìš° ë¹¨ë¼ì§€ëŠ” ì¥ì ì´ ìˆìŒ.


### Next.js ì˜ ë‹¤ì–‘í•œ ì‚¬ì „ ë Œë”ë§
| ë Œë”ë§ ë°©ì‹              | ì„¤ëª…                                                          | ì¥ì                                                                                    | ë‹¨ì                                                                   |
|--------------------------|---------------------------------------------------------------|----------------------------------------------------------------------------------------|----------------------------------------------------------------------|
| **ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§ (SSR)** | - ìš”ì²­ ì‹œë§ˆë‹¤ í˜ì´ì§€ë¥¼ ì‚¬ì „ ë Œë”ë§                                  | - í˜ì´ì§€ ë°ì´í„°ë¥¼ í•­ìƒ ìµœì‹  ìƒíƒœë¡œ ìœ ì§€ ê°€ëŠ¥                                             | - ë°ì´í„° ìš”ì²­ì´ ëŠë¦¬ë©´ ì „ì²´ í˜ì´ì§€ ë Œë”ë§ì´ ì§€ì—°ë¨                   |
| **ì •ì  ì‚¬ì´íŠ¸ ìƒì„± (SSG)** | - ë¹Œë“œ íƒ€ì„ì— ë¯¸ë¦¬ í˜ì´ì§€ë¥¼ ìƒì„±                                  | - ìƒì„±ëœ í˜ì´ì§€ë¥¼ ì¦‰ì‹œ ì‘ë‹µí•˜ë¯€ë¡œ ë¹ ë¥¸ ë¡œë”© ì†ë„                                          | - í•­ìƒ ê°™ì€ í˜ì´ì§€ ì‘ë‹µ, ìµœì‹  ë°ì´í„° ë°˜ì˜ ì–´ë ¤ì›€                    |
| **ì¤‘ë¶„ ì •ì  ì¬ìƒì„± (ISR)** | - SSGì˜ ë‹¨ì ì„ ë³´ì™„í•œ ì‚¬ì „ ë Œë”ë§ ë°©ì‹                             | - ì£¼ê¸°ì ìœ¼ë¡œ í˜ì´ì§€ë¥¼ ì—…ë°ì´íŠ¸í•˜ì—¬ ìµœì‹  ë°ì´í„° ë°˜ì˜ ê°€ëŠ¥                                  | - ì„¤ì •ì— ë”°ë¼ ìµœì‹  ë°ì´í„°ê°€ ì‹¤ì‹œê°„ ë°˜ì˜ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ             |

# 2.11) SSR(ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§) ì†Œê°œ ë° ì‹¤ìŠµ
```js
export const getServerSideProps = () => {
  // 1. ì»´í¬ë„ŒíŠ¸ë³´ë‹¤ ë¨¼ì € ì‹¤í–‰ë˜ì–´ì„œ, ì»´í¬ë„ŒíŠ¸ì— í•„ìš”í•œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜
  // 2. í•œë²ˆë§Œ ì‹¤í–‰ë¨? ì„œë²„ì¸¡ì—ì„œ ì‹¤í–‰
  // window.location; ì„œë²„ ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš© ë¶ˆê°€ëŠ¥.
  console.log("ì„œë²„ì‚¬ì´ë“œ í”„ë¡­ìŠ¤");

  const data = "hello";
  return {
    props: { // props ê°ì²´ë¥¼ ë¦¬í„´í•´ì£¼ì–´ì•¼í•¨.
      data,
    }
  }
}
export default function Home({data} : any) {

```
### index.tsx - Home ì»´í¬ë„ŒíŠ¸
1. ì‚¬ì „ë Œë”ë§ - ì„œë²„ ì‹¤í–‰ 2. ë¸Œë¼ìš°ì € js ë²ˆë“¤ ë Œë”ë§
- ëª¨ë“  ì»´í¬ë„ŒíŠ¸ëŠ” ì„œë²„ì—ì„œ í•œë²ˆ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ê·¸ëƒ¥ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ ì•ˆë¨.
  => useEffect ë¥¼ ì´ìš©í•´ì„œ í™”ë©´ ë Œë”ë§ í›„ í˜¸ì¶œë˜ë„ë¡ í•˜ê¸°.

### getServerSideProps ë¡œ ë¶€í„° props ë°ì´í„° ì „ë‹¬ë°›ëŠ” íƒ€ì… ì •ì˜
```js
export default function Home({data} : InferGetServerSidePropsType<typeof getServerSideProps>) { // Home ì»´í¬ë„ŒíŠ¸ë„ ì¦‰ ê°ì²´ì´ë¯€ë¡œ getLayout í•¨ìˆ˜ ì¶”ê°€ ê°€ëŠ¥.

```


# 2.14) SSG 2. ì •ì  ê²½ë¡œì— ì ìš©í•˜ê¸°
- npm run build
  -  ê° í˜ì´ì§€ë³„ ë Œë”ë§ ë°©ì‹ í™•ì¸ ê°€ëŠ¥.

- GetStaticPropsContext -> queryString -> context.query ë™ì‘ ë¶ˆê°€ -> ë¹Œë“œíƒ€ì„ì— ì‹¤í–‰ë˜ê¸° ë•Œë¬¸.
  => í™”ë©´ì´ ë Œë”ë§ ëœ ì´í›„ì— í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ queryStringê°’ì„ ì½ì–´ì˜¤ë„ë¡ êµ¬í˜„í•˜ê¸°.

# 2.15) SSG 2. ë™ì  ê²½ë¡œì— ì ìš©í•˜ê¸°
ë™ì ì¸ ê²½ë¡œë¥¼ ê°€ì§„ í˜ì´ì§€ë¥¼ SSG ë Œë”ë§ì„ ì ìš©í•˜ë ¤ë©´ getStaticPaths ë¥¼ í•¨ê»˜ ì ìš©í•´ì£¼ì–´ì•¼í•œë‹¤.

- book > [id].tsx ìˆ˜ì •
  -  ë¹Œë“œíƒ€ì„(Build Time) ì— í˜ì´ì§€ë³„ë¡œ ìƒì„±ë  ìˆ˜ ìˆëŠ” í˜ì´ì§€ ê²½ë¡œë¥¼ ì„¤ì •í•´ì£¼ì–´ì•¼í•¨.
     => 1. n ê°œì˜ ê²½ë¡œì„¤ì • (getStaticPaths) => 2. nê°œì˜ í˜ì´ì§€ ì‚¬ì „ ë Œë”ë§
  - í™•ì¸
    - npm run build => book ë™ì ê²½ë¡œê°€ ì •ì íŒŒì¼ë¡œ ìƒì„±ëœ ë‚´ìš©ì„ í™•ì¸ í•  ìˆ˜ ìˆìŒ. ë˜í•œ .next ë¹Œë“œ ì‚°ì¶œë¬¼ í´ë”ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŒ.



# 2.16)  SSG 4. í´ë°± ì˜µì…˜ ì„¤ì •í•˜ê¸°
> Fallback ì˜µì…˜ ì„¤ì • (ì—†ëŠ” ê²½ë¡œë¡œ ìš”ì²­ì‹œ)
> 1) false : 404 Not Found ë°˜í™˜
> 2) blocking : ì¦‰ì‹œ ìƒì„± (Like SSR)
> 3) true : ì¦‰ì‹œìƒì„± + í˜ì´ì§€ë§Œ ë¯¸ë¦¬ ë°˜í™˜(SSR + ë°ì´í„°ê°€ ì—†ëŠ” í´ë°± ìƒíƒœì˜ í˜ì´ì§€ë¶€í„° ë°˜í™˜)


### Fallback - blocking
- ìš”ì²­ ì‹œ ë¹Œë“œ íƒ€ì„ì— ë Œë”ë§. í•œë²ˆ ì‹¤í–‰ í›„ ìƒì„±í•œ html ì„ ë¦¬í„´í•¨. (SSR + SSG)
  => ë Œë”ë§ ì¤‘ ì§€ì—°ë˜ë©´ ì´í›„ ìˆœì„œë„ ì§€ì—°ë¨.

### Fallback - true
- ìš”ì²­ props ê°€ ì—†ëŠ” í˜ì´ì§€ ë³€í™˜(ë°ì´í„°ê°€ ì—†ëŠ” ìƒíƒœì˜ í˜ì´ì§€ ë Œë”ë§) -> props ê³„ì‚°
  -> props ë§Œ ë”°ë¡œ ë°˜í™˜ -> ë°ì´í„°ê°€ ìˆëŠ” ìƒíƒœì˜ í˜ì´ì§€ ë Œë”ë§

```typescript
export const getStaticPaths : GetStaticPaths = () => {
  return {
    paths: [  // ë Œë”ë§ ë  ìˆ˜ìˆëŠ” í˜ì´ì§€ id ì„¤ì •
      // url paramì€ ë¬´ì¡°ê±´ string ìœ¼ë¡œ ì£¼ì–´ì•¼í•¨.
      {params: {id: "1"}},
      {params: {id: "2"}},
      {params: {id: "3"}}
    ],
    // ëŒ€ì²´, ëŒ€ë¹„ì±… : paths ì— ì§€ì •í•˜ì§€ ì•Šì€ í˜ì´ì§€ ë Œë”ë§ì´ìš”ì²­ëì„ ë•Œ ì–´ë–»ê²Œ ì²˜ë¦¬í• ê²ƒì¸ì§€
    fallback : true,//"blocking", // false : pathì— ì„¤ì •í•˜ì§€ ì•Šì€ í˜ì´ì§€ëŠ” not found ì²˜ë¦¬

  }

  export default function Page({bookDetail}: InferGetStaticPropsType<typeof getStaticProps>) {
    const router = useRouter();
    if(router.isFallback) return "ë¡œë”©ì¤‘ì…ë‹ˆë‹¤.";
    if (!bookDetail) return "ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.";
  ...
```


# 2.17) ISR 1. ì†Œê°œ ë° ì‹¤ìŠµ
![ISR](../img/ISR.png)
## ISRì´ë€?
ISR(Incremental Static Regeneration)
ì¦ë¶„     ì •ì      ì¬ìƒì„±
- SSG ë°©ì‹ìœ¼ë¡œ ìƒì„±ëœ ì •ì  í˜ì´ì§€ë¥¼ ì¼ì • ì‹œê°„ì„ ì£¼ê¸°ë¡œ ë‹¤ì‹œ ìƒì„±í•˜ëŠ” ê¸°ìˆ .
- ì¥ì  : ë§¤ìš° ë¹ ë¥¸ ì†ë„ë¡œ ì‘ë‹µê°€ëŠ¥(ê¸°ì¡´ SSG ë°©ì‹ì˜ ì¥ì ) + ìµœì‹ ë°ì´í„° ë°˜ì˜ ê°€ëŠ¥(ê¸°ì¡´ SSR ë°©ì‹ì˜ ì¥ì )
## ISR ì ìš©
- index.tsx ì ìš©
  - ì¶”ì²œë„ì„œë¥¼ ì‹œê°„ì— ë”°ë¼ ë‹¬ë¦¬ ë³´ì—¬ì£¼ê²Œ í•˜ê¸° ìœ„í•´ì„œ ISR ì ìš©
  - getStaticProps í•¨ìˆ˜ì˜ revalidate ì˜µì…˜ ì„¤ì •
  - >> ìƒˆë¡œê³ ì¹¨ ì‹œ 3ì´ˆê°„ê²©ìœ¼ë¡œ ìƒˆë¡œìš´ ë°ì´í„°ê°€ íŒ¨ì¹­ë˜ë©° ë Œë”ë§ëœë‹¤.

# 2.18) ISR 2. ì£¼ë¬¸í˜• ì¬ ê²€ì¦
![ISR](../img/On-demand-ISR1.png)
- ì‹œê°„ê¸°ë°˜ ISR ì„ ì ìš©í•˜ê¸° ì–´ë ¤ìš´ í˜ì´ì§€ë„ ì¡´ì¬í•¨.
  - ex) ê²Œì‹œë¬¼ìƒì„¸ ì¡°íšŒ í™”ë©´ì— ì ìš©í–ˆì„ ë•Œ ì‚¬ìš©ìê°€ ê²Œì‹œê¸€ì„ ìˆ˜ì •í•˜ì§€ ì•ŠëŠ”ì´ìƒ ë°ì´í„° ë³€ê²½ì€ ì´ë£¨ì–´   
    ì§€ì§€ ì•Šì•„ë„ ë°ì´í„° íŒ¨ì¹­ ë° ë Œë”ë§ì´ ë°œìƒí•¨.
    => ì‹œê°„ê³¼ ê´€ê³„ì—†ì´ ì‚¬ìš©ìì˜ í–‰ë™ì— ë”°ë¼ ë°ì´í„°ê°€ ì—…ë°ì´íŠ¸ ë˜ëŠ” í˜ì´ì§€

## On-Demand-ISR
ìš”ì²­ì„ ë°›ì„ ë•Œë§ˆë‹¤ í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ìƒì„±í•˜ëŠ” ISR
![ISR](../img/On-demand-ISR.png)

# 26. 2.19) SEO ì„¤ì •í•˜ê¸°
- favicon ë³€ê²½
- meta íƒœê·¸ ì„¤ì •
  - nextjsì—ì„œëŠ” ê°í˜ì´ì§€ë³„ë¡œ metaíƒœê·¸ë¥¼ ì ìš©í•´ì¤„ìˆ˜ ìˆìŒ(reactëŠ” ê³µí†µ?)

## meta íƒœê·¸ ì„¤ì •
1) Head ì»´í¬ë„ŒíŠ¸
2) meta íƒœê·¸ property, content í”„ë¡œí¼í‹°ê°’ ì„¤ì •
  - content = "/asdf" => / ëŠ” public ë¥¼ ê°€ë¦¬í‚´

## SSG ë°©ì‹ì—ì„œ ì£¼ì˜ì‚¬í•­
ex) search / [id].tsx
- ë¹Œë“œ íƒ€ì„ì— ë¯¸ë¦¬ í˜ì´ì§€ë¥¼ ìƒì„±í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ fallback ì˜µì…˜ì„ trueë¡œ í–ˆì„ ë•Œ
  - ë¯¸ë¦¬ ì„¤ì •í•´ë‘” í˜ì´ì§€ ì´ì™¸ì˜ í˜ì´ì§€ë¥¼ ìš”ì²­í•˜ë©´    
    => ë°ì´í„° íŒ¨ì¹˜ê°€ ì´ë£¨ì–´ì§€ì§€ì•Šì€ í˜ì´ì§€ë§Œ ë Œë”ë§ í•œë‹¤.
  - ë•Œë¬¸ì— metaíƒœê·¸ë¥¼ ë°ì´í„°íŒ¨ì¹˜ë¥¼ í†µí•´ ì¡°íšŒí•´ì˜¨ ë°ì´í„°ë¥¼    
    ê°€ì§€ê³  ì„¤ì •í•˜ê²Œ ë˜ë©´ ë°ì´í„° íŒ¨ì¹˜ê°€ ì´ë£¨ì–´ì§€ê¸° ì „ì´ê¸° ë•Œë¬¸ì—     
    meta íƒœê·¸ë¥¼ ëœë”ë§í•˜ì§€ ì•Šì€ ë¹ˆí˜ì´ì§€ë¥¼ ë Œë”ë§í•œë‹¤.



# 27. 2.20) ë°°í¬í•˜ê¸°
- vercel signup and login
- npm install -g vercel   
- vercel --prod

## Vercel
ğŸ” UI :  [Inspect](https://vercel.com/seungyeon-chas-projects/onbite-books-page/8BQsKJ8aKHR7hx4V69QLv4id7jHn)   
ğŸ” API :  [Inspect](https://vercel.com/seungyeon-chas-projects/onbite-books-server/2aWBtED2zLqsXQaLN9iLmV3NELkz)

## í™˜ê²½ë³€ìˆ˜
[Next.js-enví™˜ê²½-ë³€ìˆ˜-ì •ë¦¬](https://velog.io/@milkboy2564/Next.js-env%ED%99%98%EA%B2%BD-%EB%B3%80%EC%88%98-%EC%A0%95%EB%A6%AC)

# 28. 2.21) í˜ì´ì§€ ë¼ìš°í„° ì •ë¦¬
-- í…ŒìŠ¤íŠ¸